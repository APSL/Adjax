jQuery.adjax_callbacks={show_message:function(a){var b=jQuery('<p class="message '+a.tags+'">'+a.content+"</p>");b.hide();jQuery("#messages").prepend(b);b.slideDown("slow");if(a.level<40){b.wait(2000).slideUp("slow")}}};var process_json_response=function(c){if(c.redirect){window;window.location.href=c.redirect}if(c.messages){for(var e in c.messages){jQuery.adjax_callbacks.show_message(c.messages[e])}}if(c.replace){for(var d in c.replace){jQuery(d).html(c.replace[d]).show()}if(c.document_ready){document_ready()}}if(c.hide){for(var b in c.hide){jQuery(c.hide[b]).hide()}}if(c.update){for(var a in c.update){jQuery("."+a).html(c.update[a])}}};var form_processor_factory=function(a,b){if(!a){a=jQuery}return function(e){process_json_response(e);var h=e.forms;a.find(".errorlist").remove();a.find(".error").removeClass("error");var f=function(){jQuery(this).addClass("error");jQuery(this).after(d)};for(var c in h){var d='<ul class="errorlist">';for(var g in h[c]){d+="<li>"+h[c][g]+"</li>"}d+="</ul>";if(c=="__all__"){a.prepend(d)}else{a.find("#form-error-"+c).each(f);a.find("#"+c).each(f)}}if(b){b(e)}}};jQuery.adjax=function(a,b,c){jQuery.ajax({url:a,dataType:"json",data:b,cache:false,success:function(d){process_json_response(d);if(c){c(d)}}});return false};jQuery.fn.adjax=function(a,b){this.each(function(){var e=jQuery(this);if(e.attr("href")){var c=e.attr("href").split("?")[0];jQuery.adjax(c,a,b);return false}else{if(e.attr("action")){var d=form_processor_factory(e,b);e.ajaxSubmit({success:d,dataType:"json"});return false}}});return false};jQuery.fn.adjaxify=function(a){this.each(function(){var c=jQuery(this);if(c.attr("href")){c.click(function(){return c.adjax(null,a)})}else{if(c.attr("tagName")=="FORM"){var b=function(){c.ajaxSubmit({success:form_processor_factory(c,a),dataType:"json"});return false};c.submit(b)}}})};jQuery.fn.wait=function(b){var a=jQuery(this);a.queue(function(){setTimeout(function(){a.dequeue()},b)});return a};